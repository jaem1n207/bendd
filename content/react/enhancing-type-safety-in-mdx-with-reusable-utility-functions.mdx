---
title: "MDXì—ì„œ JSX íƒ€ì… ì•ˆì „ì„± ë³´ì¥ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ êµ¬í˜„"
summary: 'zodì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„± ë¬¸ì œë¥¼ í•´ê²°'
description: 'MDX íŒŒì¼ì—ì„œ React ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” íƒ€ì… ì•ˆì „ì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ êµ¬í˜„ ë°©ë²•ê³¼ ê·¸ í™œìš©ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.'
category: 'react'
publishedAt: '2024-08-01'
---

ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•˜ë©° MDX íŒŒì¼ì—ì„œ JSX ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë‹¤ ìƒˆë¡œìš´ ë¬¸ì œë¥¼ ë°œê²¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
ë¶„ëª… ì»´í¬ë„ŒíŠ¸ëŠ” ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í–ˆëŠ”ë° ì˜ˆìƒê³¼ ë‹¤ë¥¸ UIë¡œ ë Œë”ë§ë˜ë˜ ê²ƒì´ì—ˆì£ . ë¬¸ì œëŠ” íŠ¹ì • prop ê°’ì„ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬í•´ì£¼ì§€ ì•Šì•˜ë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.
MDX íŒŒì¼ì—ì„  TypeScriptì˜ íƒ€ì… ì²´í¬ê°€ ì‘ë™í•˜ì§€ ì•Šì•„ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë¯¸ë¦¬ ì¡ì•„ë‚´ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
ì´ í•¨ìˆ˜ëŠ” MDXì™€ TypeScript ì‚¬ì´ì˜ ê°„ê·¹ì„ ë©”ì›Œì£¼ì–´ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.

## ë°°ê²½ ì§€ì‹

MDXëŠ” Markdownì— JSXë¥¼ ë”í•œ ë¬¸ì„œ í¬ë§·ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°œë°œìëŠ” Markdownì˜ ê°„ê²°í•¨ê³¼ React ì»´í¬ë„ŒíŠ¸ì˜ ìœ ì—°ì„±ì„ ë™ì‹œì— í™œìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

<Callout type='warning'>ì´ í¬ìŠ¤íŠ¸ëŠ” TypeScript, React, ê·¸ë¦¬ê³  ê¸°ë³¸ì ì¸ MDX ì‚¬ìš©ë²•ì— ëŒ€í•œ ì´í•´ë¥¼ ì „ì œë¡œ í•©ë‹ˆë‹¤.</Callout>

## ë¬¸ì œ: MDXì—ì„œì˜ íƒ€ì… ì•ˆì „ì„± ë³´ì¥í•˜ê¸°

MDX íŒŒì¼ì—ì„œëŠ” ì¼ë°˜ì ì¸ TypeScript ê²€ì‚¬ê°€ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- í•„ìˆ˜ props ëˆ„ë½
- ì˜ëª»ëœ íƒ€ì…ì˜ props ì „ë‹¬
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” props ì‚¬ìš©

ì´ëŸ¬í•œ ë¬¸ì œëŠ” ëŸ°íƒ€ì„ ì—ëŸ¬ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´, ê°œë°œ ê³¼ì •ì—ì„œ ë¯¸ë¦¬ ì¡ì•„ë‚´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
ë§Œì•½ ì €ì²˜ëŸ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ëŒ€ì¶© ë§Œë“¤ê³  ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì œëŒ€ë¡œ í•´ë‘ì§€ ì•Šì•˜ë‹¤ë©´ ë””ë²„ê¹…ì— ë§ì€ ì‹œê°„ì„ íˆ¬ìí•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ğŸ˜”

### ì¬ì‚¬ìš© ê°€ëŠ¥í•œ MDX ì»´í¬ë„ŒíŠ¸ ì „ìš© ìœ íš¨ì„± ê²€ì‚¬ ìœ í‹¸ í•¨ìˆ˜ ë§Œë“¤ê¸°

ì²˜ìŒ ìƒê°í•œ ì ‘ê·¼ ë°©ì‹ì€ validator í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” MDXì™€ TypeScript ì‚¬ì´ì˜ ê°„ê·¹ì„ ë©”ì›Œì¤ë‹ˆë‹¤.

## ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ êµ¬í˜„

ë‹¤ìŒì€ í•µì‹¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì˜ êµ¬í˜„ì…ë‹ˆë‹¤:

<Steps>

### createMDXComponent í•¨ìˆ˜

ì»´í¬ë„ŒíŠ¸ì™€ validator í•¨ìˆ˜ë¥¼ ë°›ì•„ ìƒˆë¡œìš´ ë˜í¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```ts
import React, { ComponentType, ReactElement } from 'react';

type ValidatorFunction<P> = (
  props: P,
  componentName: string
) => string | undefined;

export function createMDXComponent<P extends {}>(
  Component: ComponentType<P>,
  validator: ValidatorFunction<P>
): (props: P) => ReactElement {
  const componentName = Component.displayName || Component.name || 'Component';

  const MDXComponent = (props: P): ReactElement => {
    if (process.env.VERCEL_ENV !== 'production') {
      const error = validator(props, componentName);
      if (error) {
        throw new Error(`[MDX Component Error] ${componentName}: ${error}`);
      }
    }
    return React.createElement(Component, props);
  };

  MDXComponent.displayName = `MDX${componentName}`;

  return MDXComponent;
}
```

### ê° ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ validator ìƒì„±

```ts
type PropValidator<T> = (value: T) => boolean;

function getTypeName(value: any): string {
  if (value === null) return 'null';
  if (Array.isArray(value)) return 'array';
  if (
    typeof value === 'object' &&
    value.constructor &&
    value.constructor.name
  ) {
    return value.constructor.name;
  }
  return typeof value;
}

export function createPropValidator<P extends object>(
  requiredProps: (keyof P)[],
  propTypes: { [K in keyof P]?: PropValidator<P[K]> }
) {
  return (props: P) => {
    for (const prop of requiredProps) {
      if (!(prop in props)) {
        throw new Error(`í•„ìˆ˜ propì„ ì „ë‹¬í•˜ì§€ ì•Šì•˜ì–´ìš”: ${String(prop)}`);
      }
    }

    for (const [key, validator] of Object.entries(propTypes) as [
      keyof P,
      PropValidator<any> | undefined,
    ][]) {
      if (key in props) {
        const value = props[key as keyof P];
        if (!validator?.(value)) {
          const expectedType = propTypes[key as keyof P]?.name || 'unknown';
          const actualType = getTypeName(value);
          throw new TypeError(
            `ì˜ëª»ëœ propì˜ ê°’ì„ ì „ë‹¬í–ˆì–´ìš”: ${String(key)}. ${actualType} íƒ€ì…ì„ ì „ë‹¬ë°›ì•˜ì–´ìš”.`
          );
        }
      }
    }

    return undefined;
  };
}
```

</Steps>

## MDX ì»´í¬ë„ŒíŠ¸ì™€ì˜ í†µí•©

ì´ì œ ì´ ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ Callout MDX ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì •í•´ë³´ê² ìŠµë‹ˆë‹¤:

```ts
import { createMDXComponent, createPropValidator } from './mdx-utils';

const calloutValidator = createPropValidator<CalloutProps>(['children'], {
  type: value => ['info', 'error', 'warning'].includes(value || 'info'),
  emoji: value => typeof value === 'string' || isValidElement(value),
  children: value => isValidElement(value) || typeof value === 'string',
});

export const MDXCallout = createMDXComponent(Callout, calloutValidator);
```

ì´ì œ MDX íŒŒì¼ì—ì„œ `Callout`ì„ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ í•„ìˆ˜ propì„ ëˆ„ë½í•˜ê±°ë‚˜ ì˜ëª»ëœ íƒ€ì…ì˜ propì„ ì „ë‹¬í•˜ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤:

![type-error-callout](/images/enhancing-type-safety/type-error-callout.webp)

## í•œê³„ì 

ì´ ì ‘ê·¼ ë°©ì‹ì€ ëŒ€ë¶€ë¶„ì˜ ìƒí™©ì—ì„œ ì˜ ì‘ë™í•˜ì§€ë§Œ, ë³µì¡í•œ prop íƒ€ì…ì´ë‚˜ ì„ íƒì  propsë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²• ë“± ì‚¬ìš©ì„±ì— ëŒ€í•´ì„œë„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
ë˜í•œ, ì´ ë°©ë²•ì€ propsë¥¼ ë³€ê²½í•˜ë©´ validator í•¨ìˆ˜ë„ í•¨ê»˜ ìˆ˜ì •í•´ì•¼ í•œë‹¤ëŠ” ì ì„ ì—¼ë‘ì— ë‘ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ìœ ì§€ê´€ë¦¬ì— ìˆì–´ ì¶”ê°€ì ì¸ ë¶€ë‹´ì„ ì¤„ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤._createMdxContent

## zodì™€ í•¨ê»˜ ì‚¬ìš©í•˜ê¸°

zodë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•˜ê³  ì´ë¥¼ í†µí•´ ìœ íš¨ì„± ê²€ì¦ê³¼ íƒ€ì… ì„ ì–¸ì„ í•œ ë²ˆì— í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
zodë¥¼ ì‚¬ìš©í•  ë•Œì™€ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ êµ¬ë¬¸ì„ ë¹„êµí•´ë³´ê² ìŠµë‹ˆë‹¤.

### ìœ íš¨ì„± ê²€ì¦ ë° íƒ€ì… ì„ ì–¸ êµ¬ë¬¸ ë¹„êµ

<MagicMove
  lang="ts"
  codeSnippets={[
    {
      title: "zod ì‚¬ìš© x",
      description: "Callout ì»´í¬ë„ŒíŠ¸ì˜ ìœ íš¨ì„± ê²€ì¦ ìŠ¤í‚¤ë§ˆ ì •ì˜",
      content: `type CalloutProps = {
  type?: CalloutType;
  emoji?: string | ReactNode;
  children: ReactNode;
};

const calloutValidator = createPropValidator<CalloutProps>(['children'], {
  type: value => ['info', 'error', 'warning'].includes(value || 'info'),
  emoji: value => typeof value === 'string' || isValidElement(value),
  children: value => isValidElement(value) || typeof value === 'string',
});`
    },
     {
      title: "zod ì‚¬ìš©",
      description: "Callout ì»´í¬ë„ŒíŠ¸ì˜ ìœ íš¨ì„± ê²€ì¦ ìŠ¤í‚¤ë§ˆ ì •ì˜",
      content: `import { z } from 'zod';

type CalloutProps = z.infer<typeof CalloutSchema>;

const CalloutSchema = z.object({
  type: z.enum(['info', 'warning', 'error']).optional().default('info'),
  emoji: z.string().optional(),
  children: z
    .custom<ReactNode>(v => isValidElement(v) || typeof v === 'string')
    .or(
      z.array(
        z.custom<ReactNode>(v => isValidElement(v) || typeof v === 'string')
      )
    ),
});`
    }
  ]}
/>

ë§ˆì§€ë§‰ìœ¼ë¡œ `validateProps` í•¨ìˆ˜ì™€ `createMDXComponent` í•¨ìˆ˜ë¥¼ ì ì ˆíˆ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤:

```ts
type MDXComponent<T extends z.ZodType> = React.FC<z.infer<T>>;

export function createMDXComponent<T extends z.ZodType>(
  Component: React.FC<z.infer<T>>,
  schema: T
): MDXComponent<T> {
  const MDXComponent: MDXComponent<T> = props => {
    const componentName =
      Component.displayName || Component.name || 'Unknown Component Name';
    validateProps(schema, props, componentName);

    return createElement(Component, props);
  };

  return MDXComponent;
}

function validateProps<T extends z.ZodType>(
  schema: T,
  props: z.infer<T>,
  componentName: string
) {
  if (process.env.VERCEL_ENV !== 'production') {
    try {
      schema.parse(props);
    } catch (error) {
      throw new Error(`[${componentName} Error]: ${fromError(error)}`);
    }
  }
}
```

zodë¥¼ ì‚¬ìš©í•´ ì½”ë“œ ê°€ë…ì„±ì„ í–¥ìƒí•˜ê³ , íƒ€ì… ì„ ì–¸ê³¼ ìœ íš¨ì„± ê²€ì¦ì„ í•œ ë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## ê²°ë¡ 

ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ í†µí•´ MDX íŒŒì¼ì—ì„œì˜ íƒ€ì… ì•ˆì „ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” ê°œë°œ ê³¼ì •ì—ì„œ ë§ì€ ì ì¬ì  ì˜¤ë¥˜ë¥¼ ë¯¸ë¦¬ ì¡ì•„ë‚´ê³ , ë” ì•ˆì •ì ì¸ ì›¹ì•±ì„ ë§Œë“œëŠ” ë° ë„ì›€ì„ ì¤„ ê²ƒì…ë‹ˆë‹¤. 

## ì°¸ê³ 

- [MDX ê³µì‹ ë¬¸ì„œ](https://mdxjs.com/)
- [zod ê³µì‹ ë¬¸ì„œ](https://zod.dev/)
